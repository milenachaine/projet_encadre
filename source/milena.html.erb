---
site:
  title: Projet BAO
  categorie: Travail de Milena Chaîne
  description: Projet de traitement automatique des langues, utilisant Perl et XSLT

author:
  all: Milena Chaîne, Margaux Duhayon, Ferial Yahiaoui
  milena: Milena Chaîne
  margaux: Margaux Duhayon
  ferial: Ferial Yahiaoui
  school: Inalco

master:
  site: "http://www.tal.univ-paris3.fr/plurital/"

layout: milena
---

<% content_for :logo do %>
  <%= image_tag 'computer_bao.png' %>
<% end %>

<p>Cette page présente mes scripts d'extractions de rubriques, les patrons morpho-syntaxiques que j'ai choisis pour mon analyse, ainsi que les graphes que j'ai pu créer. Mon travail a suivi ce schéma :</p>
<%= image_tag 'schema/bao_schema.png' %>
<p>Comme indiqué sur la page d'accueil, j'ai choisi trois rubriques : Europe, International, et Société. Ces rubriques font partie des rubriques les plus générales du journal, et on peut s'attendre à ce que le style journalistique y soit relativement homogène (en comparaison par exemple avec les rubriques d'opinion ou de critique artistique et culturelle).</p>
<p>Tous les scripts sont visibles sur la page elle-même et téléchargeables. Pour naviguer entre les différentes boîtes à outils, vous pouvez utiliser la barre d'onglets ci-dessous. </p>

<%= partial "partials/h3", :locals => { :raccourci => "bao1_2", :titre => "Boîtes à outils 1 et 2 : création des fichiers"} %>
<%= partial "partials/onglets_milena" %>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
</p>

<%= image_tag 'schema/bao_schema_1_2.png' %>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<label>
  <%= partial "partials/code", :locals => { :code_file => "assets/milena/BAO1_2_milena_utf_8.pl"} %>
  <% code("perl") do %>
  #/usr/bin/perl

  # Milena Chaîne - 2017-2018
  # commande : perl BAO1_2_milena.pl repertoire_a_parcourir numero_de_la_rubrique
  # description : ce programme parcourt un répertoire (fonction parcoursarborescencefichiers)
  # quand il trouve un fichier xml contenant le numéro de la rubrique, il le nettoie (fonction nettoyage)
  # il renvoie les titres et descriptions non étiquetés dans un fichier texte
  # ensuite, il extrait les titres et descriptions des articles et les étiquète (fonction etiquetage, utilise treetagger)
  # ce résultat étiqueté est envoyé vers un fichier xml (programme treetagger2xml-utf8.pl) sous le format :
  # <item number="[numéro de l'article]">
  # <titre><document><article>[titre étiqueté]</article></document></titre>
  # <description><document><article>[description étiquetée]</article></document></description></item>
  #
  # données : le nom du répertoire contenant les fichiers à traiter, le numéro de rubrique à traiter
  # résultat : un fichier txt, un fichier xml, dans un répertoire nommé sortie

  my $test="Syntaxe : perl BAO1_2_milena.pl repertoire_a_parcourir numero_de_la_rubrique\n";

  if (@ARGV!=2) {
    die $test;
  }

  #récupération des arguments
  my ($rep, $rubrique) = @ARGV;
  $rep=~ s/[\/]$//; #on s'assure que le nom du répertoire ne se termine pas par un "/"

  #gestion de l'encodage
  my $encodage = "utf-8";

  my %liste= ();
  my $filecompteur = 1;
  my $itemcompteur = 0;


  #création du répertoire de sortie
  mkdir "sortie";
  open($sortie_xml, ">>:encoding($encodage)", ".\/sortie\/$rubrique.xml")
    || die "Impossible d'ouvrir $sortie_xml";
  open($sortie_txt, ">>:encoding($encodage)", ".\/sortie\/$rubrique.txt")
    || die "Impossible d'ouvrir $sortie_txt";

  print $sortie_xml "<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n";
  print $sortie_xml "<PARCOURS>\n";
  print $sortie_xml "<NOM>Milena CHAINE</NOM>\n";
  print $sortie_xml "<FILTRAGE>\n";

  #-----------------------------------------------------------
  &parcoursarborescencefichiers($rep); #on lance la récursion qui se terminera après examen de toute l'arborescence

  #-----------------------------------------------------------
  print $sortie_xml "</FILTRAGE>\n";
  print $sortie_xml "</PARCOURS>\n";

  close $sortie_txt;
  close $sortie_xml;

  exit;

  #-----------------------------------------------------------
  sub nettoyage {
    my $var1 = shift(@_); #@_: liste des arguments d'une procédure
    my $var2 = shift(@_);
    my $var3 = shift(@_);
    my $var4 = shift(@_);
    my $var5 = shift(@_);
    my $var6 = shift(@_);
    my $var7 = shift(@_);

    $var1 =~s/&lt;.+?&gt;//g;
    $var2 =~s/&lt;.+?&gt;//g;
    $var3 =~ s/&#38;#39;/'/g;
    $var4 =~ s/&#039;/'/g;
    $var5 =~ s/\t+//gs;
    $var6 =~ s/> +</></g;
    $var7 =~ s/<[^>]+?>//g;
    return $var1,$var2,$var3,$var4,$var5,$var6,$var7;
  }

  #-----------------------------------------------------------
  sub etiquetage {
    my $var1 = shift(@_);
    my $var2 = shift(@_);

    open($titre_txt, ">:encoding($encodage)", ".\/sortie\/titre.txt")
      || die "Impossible d'ouvrir $titre_txt";

    open($description_txt, ">:encoding($encodage)", ".\/sortie\/description.txt")
      || die "Impossible d'ouvrir $description_txt";

  	print $titre_txt $var1;
  	print $titre_txt "\n";
  	print $description_txt $var2;
  	print $description_txt "\n";

  	close $titre_txt;
  	close $description_txt;

  	#traitement du titre
  	system("perl tokenise-utf8.pl ./sortie/titre.txt | /Users/milena/Documents/Travail/M1TAL/PROJET_BAO/tree-tagger/bin/tree-tagger -token -lemma -no-unknown /Users/milena/Documents/Travail/M1TAL/PROJET_BAO/tree-tagger/lib/french-utf8.par > ./sortie/titre_etiquette.txt");
  	system("perl treetagger2xml-utf8.pl ./sortie/titre_etiquette.txt utf8");

  	#traitement de la description
  	system("perl tokenise-utf8.pl ./sortie/description.txt | /Users/milena/Documents/Travail/M1TAL/PROJET_BAO/tree-tagger/bin/tree-tagger -token -lemma -no-unknown /Users/milena/Documents/Travail/M1TAL/PROJET_BAO/tree-tagger/lib/french-utf8.par > ./sortie/description_etiquette.txt");
  	system("perl treetagger2xml-utf8.pl ./sortie/description_etiquette.txt utf8");

  	local $/=undef; #pour pouvoir extraire le fichier xml en entier

  	#création de la variable contenant toutes les balises titre
  	open(TITRE, "<:encoding(utf8)","./sortie/titre_etiquette.txt.xml")
  		|| die "Impossible d'ouvrir le fichier txt converti en xml";
  	my $titre_etiquette=<TITRE>;
  	$titre_etiquette =~s/<\?xml version="1\.0" encoding="utf-8" standalone="no"\?>\n//;
  	close TITRE;

  	#création de la variable contenant toutes les balises description
  	open(DESC, "<:encoding(utf8)", "./sortie/description_etiquette.txt.xml")
  		|| die "Impossible d'ouvrir le fichier txt converti en xml";
  	my $description_etiquette=<DESC>;
  	$description_etiquette =~s/<\?xml version="1\.0" encoding="utf-8" standalone="no"\?>\n//;
  	close DESC;

  	return $titre_etiquette, $description_etiquette;
  }

  #-----------------------------------------------------------
  sub parcoursarborescencefichiers {
    my $path = shift(@_);
    opendir(DIR, $path)
      || die "Impossible d'ouvrir $path: $!\n";
    my @files = readdir(DIR);
    closedir(DIR);
    foreach my $file (@files) {

    	next if $file =~ /^\.\.?$/; #si $file est un fichier
    	$file = $path."/".$file;

    	#si $file est un répertoire
    	if (-d $file) {
    		print "<NOUVEAU REPERTOIRE> ==> ",$file,"\n";
    		&parcoursarborescencefichiers($file);	#récursivité : on va descendre dans l'arborescence et refaire la même opération
    		print "<FIN REPERTOIRE> ==> ",$file,"\n";
    	}

    	#si $file est un fichier
    	if (-f $file) {

    	  #si $file contient le nom de la rubrique
        if($file =~/$rubrique.+\.xml$/) {
          print "<",$filecompteur++,"> ==> ",$file,"\n";

          open (FICHIER, "<:encoding($encodage)", $file);
          my $ensemble="";

          #on récupère le contenu de chaque ligne
          while (my $ligne = <FICHIER>) {
            chomp $ligne;
            $ligne =~ s/\r//g;
            $ensemble = $ensemble . $ligne;
          }

          close FICHIER;

          #on récupère les titres et les descriptions
          while ($ensemble =~ m/<item>.*?<title>(.+?)<\/title>.*?<description>(.+?)<\/description>.*?<\/item>/g){
            my $titre = $1;
            my $description = $2;

            #s'ils n'ont pas déjà été traités
            if (!(exists $liste{$titre})) {
              $liste{$titre} = 1;

              #on nettoie le texte
              my ($titre_propre, $description_propre) = &nettoyage($titre, $description);

              #on étiquète le texte des titres et des descriptions avant de les réintégrer dans la sortie XML
              $itemcompteur++;
              my ($titre_etiquette, $description_etiquette) = &etiquetage($titre_propre, $description_propre);

              print $sortie_xml "<item number=\"$itemcompteur\">\n<titre>$titre_etiquette</titre>\n<description>$description_etiquette</description>\n</item>\n";
              print $sortie_txt "§ $titre\n$description\n\n";

            }
          }
        }
      }
    }
  }
  <% end %>
</label>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<%= partial "partials/h3", :locals => { :raccourci => "bao3", :titre => "Boîte à outils 3 : recherche des patrons"} %>
<%= partial "partials/onglets_milena" %>

<%= image_tag 'schema/bao_schema_3.png' %>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<h4>CORDIAL</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<h4>TREETAGGER</h4>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<%= partial "partials/h3", :locals => { :raccourci => "bao4", :titre => "Boîte à outils 4 : création de graphes"} %>
<%= partial "partials/onglets_milena" %>

<%= image_tag 'schema/bao_schema_4.png' %>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<p>Test d'intégration d'images :</p>
<p><%= image_tag 'cog_transparent_32px.png', :class => "icon" %> Par exemple on peut mettre du texte à la suite de cette icône ! Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. </p>

<p> Ruby <%= image_tag 'ruby_32px.png', :class => "icon" %> Ruby</p>

<p><%= image_tag 'ruby_64px.png', :class => "icon" %> Ruby! </p>

<%= partial "partials/h3", :locals => { :raccourci => "conclu", :titre => "Conclusion"} %>
<%= partial "partials/onglets_milena" %>

<p>bip bop</p>
